<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="The-radio : Web radio for homan beeings" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>The-radio</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/2dom/the-radio">View on GitHub</a>

          <h1 id="project_title">The-radio</h1>
          <h2 id="project_tagline">Web radio for homan beeings</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/2dom/the-radio/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/2dom/the-radio/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>Why?</h2>

<p><img src="https://raw.github.com/2dom/the-radio/master/pics/small_front.JPG" alt="The result">
My wife wanted to have a new radio for the kitchen and threatened to buy some ~150 EUR CD/analog radio combo if I don't do anything about it. So I committed myself to come up with something that is 'infinitely better than the CD thing' for less then 100 EUR. How wrong I was to believe that one could simply buy a nice and easy to operate web-radio (think 3 year olds) that can play music from our NAS as well as tolerate the occasional ratatouille covered finger. The best I could find slightly outside of the 100 EUR budget was a Logitech Squeezebox but that has a million buttons and frankly would not survive a week in out kitchen. </p>

<p>So I set out to build a web-radio on basis of an old radio shell I bought ages ago on a flea market. It is a German Greatz vacuum tube radio built between 1953 and 1954. 
<img src="https://raw.github.com/2dom/the-radio/master/pics/small_original.JPG" alt="Original radio"> 
The radio was non-functional when I bought and on closer inspection, I found that some tubes where missing as well as some of the circuitry (no idea what the previous owner did to the poor thing). It still like the worn look of it however to be useful as a functional kitchen web radio I had to bring it up to scratch. This process involved the refurbishing of the outside, the installation of a new amp, an network capable mp3 player as well as some analog / digital interface to make use of all those awesome dials. </p>

<h2>The outside</h2>

<p>I removed the varnish with fine sand paper and stained the raw wood in a dark brown color. After some consideration I settled on shellac for the coating. I read quite a bit about how to do this (takes a lot of practice and time if you want to get it right and aim for an absolutely smooth surface). I went for the the relatively easy to do mate finish option which is relatively simple to achieve using a paintbrush. The shellac leaves are dissolved in pure ethanol alcohol for 24h before use. Only use very small amounts between coatings otherwise you will end up having bumps that you have to sand down later (pain). Also carefully sand down between coatings. I used about 4-5 coatings and the result is acceptable for my purpose however far from a piano like surface. </p>

<p>Repairing the front fabric was more tricky than I thought ... my wife tried to find a similar fabric to the original one but no avail. There is an old lady in Holland that will hand weave any <a href="http://www.corrienmaas.nl/Engels/hoofdframe.htm">radio fabric</a> you like, but that is a bit off-budget. I finally settled on a Fender Wheat guitar amp 'grill cloth' - not as nice as the original, but at least the kids will have a hard time poking holes in it. I also replaced the MDF-board that held the original speaker and glued the new 'grill cloth' to it with transparent wood glue.</p>

<p>I also thoroughly cleaned all the buttons and dials with a mild soap mixture. Before coating I also took of the messing strips and tried to clean them with a salt and vinegar mixture. Unfortunately these strips only have a very fine layer of brass that was severely damaged in the first place. So I managed to remove all the stains however now the damaged surface is even more visible. I might replace these strips one day if I have the right tools to cut very odd angles.</p>

<h2>The amp &amp; speaker</h2>

<p>I would have loved to use a small tube amp for this project but I could not find anything that sounds acceptable and fits withing the budget. Instead I settled for a pair of Logitech X-140 PC speakers. I also own a Logitech X 230 / sub-woofer combo which sounds very good for the price which made me believe that the X-140 would do the same. Unfortunately that was not really the case. To my surprise I discovered only one active speaker per speakerbox although the speakerbox superficially looks like it has two. The second speaker turned out to be passive membrane pictured below
<img src="https://raw.github.com/2dom/the-radio/master/pics/small_logitech_speaker.JPG" alt="Original radio"> 
I want to believe that this is all justified and then Logitech's clever speakerbox design + passive membrane leads to superb low frequency responses however I felt a bit ripped off nevertheless. Fortunately, I discovered during disassembly that the guy who tortured the poor tube radio to death also replaced the stock speaker with a rather modern Visaton wide band speaker. A match made in heaven. I simply soldered the wide band speaker in parallel to one of the small Logitech speakers and moved it a bit off center to preserve the stereo effect. The sound is pretty decent now. However, the lesson I learned here for future projects is to invest a bit more in amps and speakers - I think 10 Euros more would have made a big difference.  </p>

<p>Another problem I encountered was a lot of static noise and humming. This was probably picked up from the switched power supplies that are operating in close proximity to the amp (Logitech actually circumvents this problem by placing the power supply in one speakerbox and the amp in the other). To get around this problem, I went to the supermarket and found a tin box (yummy chocolates) that could house the amp and act as a shield - this completely solved the noise issue. I also screwed the amp's heat sink to the lid of the tin so it would not overheat. In practice the amp  does not even get hand warm now.    </p>

<h2>Network MP3 player</h2>

<p>My fist idea of implementing the MP3 player was using a Edimax 6200n wifi router with OpenWRT and a USB soundcard that mounts our NAS via Samba and runs the an MPD server. This did not work out so well for several reasons. First of all current trunk versions of OpenWRT have a <a href="http://wiki.openwrt.org/toh/edimax/3g-6200n">broken network functionality</a> which essentially leaves the router inaccessible from the outside. After some reading of bug reports and patching the sources, I managed to compile a working image. The next problem was that I was not able to get two USB devices (USB sound dongle &amp; Arduino) to work in a conjunction with a USB hub. So I took the plunge and soldered a serial-cable to the PCB of the Edimax router and connected the Arduino the old fashioned way. That left me with only one usb device (audio) which worked reasonably well. What finally killed the router idea was the severe flash memory limitation of 4MB. I was unable to fit Openwrt with USB-audio support, MPD and Samba file system modules within that space. It is probably somehow possibly but I was pretty fed up at that point. I briefly experimented with network mounted root but then finally gave up (root on a USB stick did not work either since I would have had to use a hub again).</p>

<p>So instead I chose a RasperryPI model A for the Network MP3 player. I chose the A model since serial and audio is on board - so I only need one USB port (wifi). So the setup now involved the PI, 4GB class 10 SD-Card, Edimax EW-7811UN WIFI dongle and a simple phone charger as the power supply. I started off using Arch Linux since I was intrigued by short boot times however I spend a lot of time to get used to their systemd service manager. What killed Arch for me was the buggy serial kernel driver in the stock arch distro for Raspberry PI. I experienced data loss and random lockups. I did not investigate this any further since I finally wanted to get something to work and simply changed to Raspbian. Here the same code that kept me cursing for days worked flawlessly. I can only advice anyone why works with the PI for the first time to start off with Raspbian. </p>

<h2>Interfacing the controls</h2>

<p>I wanted to preserve the feeling of the radio as much as I can. This meant that all of the original functionality would have to be re-implemented somehow. From the interface side, this involved reading the analog values of all potentiometers (volume, bass, treble), reading the state of the selector switches as well as interfacing the  </p>

<pre><code>$ cd your_repo_root/repo_name
$ git fetch origin
$ git checkout gh-pages
</code></pre>

<p><img src="https://raw.github.com/2dom/the-radio/master/pics/small_back.JPG" alt="Functional but not cleaned up" title="Functional but not cleaned up"></p>

<p>If you're using the GitHub for Mac, simply sync your repository and you'll see the new branch.</p>

<h3>Designer Templates</h3>

<p>We've crafted some handsome templates for you to use. Go ahead and continue to layouts to browse through them. You can easily go back to edit your page before publishing. After publishing your page, you can revisit the page generator and switch to another theme. Your Page content will be preserved if it remained markdown format.</p>

<h3>Rather Drive Stick?</h3>

<p>If you prefer to not use the automatic generator, push a branch named <code>gh-pages</code> to your repository to create a page manually. In addition to supporting regular HTML content, GitHub Pages support Jekyll, a simple, blog aware static site generator written by our own Tom Preston-Werner. Jekyll makes it easy to create site-wide headers and footers without having to copy them across every page. It also offers intelligent blog support and other advanced templating features.</p>

<h3>Authors and Contributors</h3>

<p>You can <a href="https://github.com/blog/821" class="user-mention">@mention</a> a GitHub username to generate a link to their profile. The resulting <code>&lt;a&gt;</code> element will link to the contributor's GitHub Profile. For example: In 2007, Chris Wanstrath (<a href="https://github.com/defunkt" class="user-mention">@defunkt</a>), PJ Hyett (<a href="https://github.com/pjhyett" class="user-mention">@pjhyett</a>), and Tom Preston-Werner (<a href="https://github.com/mojombo" class="user-mention">@mojombo</a>) founded GitHub.</p>

<h3>Support or Contact</h3>

<p>Having trouble with Pages? Check out the documentation at <a href="http://help.github.com/pages">http://help.github.com/pages</a> or contact <a href="mailto:support@github.com">support@github.com</a> and we’ll help you sort it out.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">The-radio maintained by <a href="https://github.com/2dom">2dom</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
